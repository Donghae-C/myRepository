<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <title>Document</title>
  </head>
  <body>
    <form>
      <fieldset>
        <legend>취미선택</legend>
        <input type="checkbox" name="all" value="all" />
        <span id="span">전체선택</span>
        <p>
          <input type="checkbox" name="hobby" value="등산" />등산
          <input type="checkbox" name="hobby" value="수영" />수영
          <input type="checkbox" name="hobby" value="낚시" />낚시
          <input type="checkbox" name="hobby" value="놀기" />놀기
          <input type="checkbox" name="hobby" value="먹기" />먹기

          <input type="button" value="클릭" />
        </p>
      </fieldset>
    </form>

    <div id="result"></div>
    <script>
      let firstBox = document.querySelector("[name='all']");
      document.querySelector("[name='all']").addEventListener("click", (e) => {
        //선택시 아래 전체가 선택되게. or 해제시 전체 해제
        document.querySelectorAll("[name='hobby']").forEach((box, i) => {
          box.checked = firstBox.checked;
        });
      });
      document.querySelectorAll("[name='hobby']").forEach((box, i) => {
        box.addEventListener("click", () => {
          if (!box.checked) {
            firstBox.checked = box.checked;
          }
        });
      });

      document.querySelector("[value='클릭']").addEventListener("click", (e) => {
        let info = "";
        document.querySelectorAll("[name='hobby']:checked").forEach((item) => {
          info += `${item.value} | `;
        });
        document.getElementById("result").innerHTML = info;
      });
    </script>
  </body>
</html>
