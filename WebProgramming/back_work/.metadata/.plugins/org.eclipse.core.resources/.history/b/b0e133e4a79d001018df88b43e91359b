package web.mvc.controller;

import java.sql.SQLException;

import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import jakarta.servlet.http.HttpSession;
import web.mvc.dto.UserDTO;
import web.mvc.exception.AuthenticationException;
import web.mvc.service.UserService;
import web.mvc.service.UserServiceImpl;

public class UserController implements Controller {
	UserService userServcie = new UserServiceImpl();
	
	public ModelAndView login(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException, SQLException {
		String userId = request.getParameter("userId");
		String pwd = request.getParameter("pwd");
		UserDTO userDto = new UserDTO(userId, pwd);
		UserDTO user = userServcie.loginCheck(userDto);
		HttpSession session = request.getSession();
		session.setAttribute("loginUser", user);
		
		return new ModelAndView("index.jsp", true);
	}
}
